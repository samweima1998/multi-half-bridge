import{s as Q,n as H,o as U}from"../chunks/scheduler.e108d1fd.js";import{S as Z,i as $,g as C,y as G,s as I,h as q,j as D,z as J,f as v,c as X,k as m,a as M,x as L,A as Y,m as ee,n as te,l as b,o as le}from"../chunks/index.9fbb5c4c.js";function E(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function N(i,n,s){const c=i.slice();return c[15]=n[s],c[17]=s,c}function O(i,n,s){const c=i.slice();return c[18]=n[s],c}function V(i,n,s){const c=i.slice();return c[21]=n[s],c}function j(i){let n,s,c,f,o;return{c(){n=G("line"),this.h()},l(r){n=J(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),D(n).forEach(v),this.h()},h(){m(n,"x1",s=i[21].x1),m(n,"y1",c=i[21].y1),m(n,"x2",f=i[21].x2),m(n,"y2",o=i[21].y2),m(n,"stroke","black"),m(n,"stroke-width","2")},m(r,l){M(r,n,l)},p(r,l){l&2&&s!==(s=r[21].x1)&&m(n,"x1",s),l&2&&c!==(c=r[21].y1)&&m(n,"y1",c),l&2&&f!==(f=r[21].x2)&&m(n,"x2",f),l&2&&o!==(o=r[21].y2)&&m(n,"y2",o)},d(r){r&&v(n)}}}function W(i){let n;return{c(){n=C("div"),this.h()},l(s){n=q(s,"DIV",{class:!0,style:!0}),D(n).forEach(v),this.h()},h(){m(n,"class","blue-dot svelte-1itgow5"),b(n,"left",i[18].x+"px"),b(n,"top",i[18].y+"px")},m(s,c){M(s,n,c)},p(s,c){c&1&&b(n,"left",s[18].x+"px"),c&1&&b(n,"top",s[18].y+"px")},d(s){s&&v(n)}}}function F(i){let n,s,c=(i[15].number!==null?i[15].number:"")+"",f,o,r=E(i[15].blueDots),l=[];for(let t=0;t<r.length;t+=1)l[t]=W(O(i,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=I(),s=C("div"),f=ee(c),o=I(),this.h()},l(t){for(let e=0;e<l.length;e+=1)l[e].l(t);n=X(t),s=q(t,"DIV",{class:!0,style:!0});var u=D(s);f=te(u,c),o=X(u),u.forEach(v),this.h()},h(){m(s,"class","dot svelte-1itgow5"),b(s,"left",i[15].x+"px"),b(s,"top",i[15].y+"px")},m(t,u){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,u);M(t,n,u),M(t,s,u),L(s,f),L(s,o)},p(t,u){if(u&1){r=E(t[15].blueDots);let e;for(e=0;e<r.length;e+=1){const d=O(t,r,e);l[e]?l[e].p(d,u):(l[e]=W(d),l[e].c(),l[e].m(n.parentNode,n))}for(;e<l.length;e+=1)l[e].d(1);l.length=r.length}u&1&&c!==(c=(t[15].number!==null?t[15].number:"")+"")&&le(f,c),u&1&&b(s,"left",t[15].x+"px"),u&1&&b(s,"top",t[15].y+"px")},d(t){t&&(v(n),v(s)),Y(l,t)}}}function ne(i){let n,s,c,f=E(i[1]),o=[];for(let t=0;t<f.length;t+=1)o[t]=j(V(i,f,t));let r=E(i[0]),l=[];for(let t=0;t<r.length;t+=1)l[t]=F(N(i,r,t));return{c(){n=C("main"),s=G("svg");for(let t=0;t<o.length;t+=1)o[t].c();c=I();for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){n=q(t,"MAIN",{});var u=D(n);s=J(u,"svg",{class:!0});var e=D(s);for(let d=0;d<o.length;d+=1)o[d].l(e);e.forEach(v),c=X(u);for(let d=0;d<l.length;d+=1)l[d].l(u);u.forEach(v),this.h()},h(){m(s,"class","svelte-1itgow5")},m(t,u){M(t,n,u),L(n,s);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(s,null);L(n,c);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(n,null)},p(t,[u]){if(u&2){f=E(t[1]);let e;for(e=0;e<f.length;e+=1){const d=V(t,f,e);o[e]?o[e].p(d,u):(o[e]=j(d),o[e].c(),o[e].m(s,null))}for(;e<o.length;e+=1)o[e].d(1);o.length=f.length}if(u&1){r=E(t[0]);let e;for(e=0;e<r.length;e+=1){const d=N(t,r,e);l[e]?l[e].p(d,u):(l[e]=F(d),l[e].c(),l[e].m(n,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=r.length}},i:H,o:H,d(t){t&&v(n),Y(o,t),Y(l,t)}}}let y=20;function se(i,n,s){let c=0,f=0,o=[],r=[],l={current:null},t=null,u=null;const e=()=>{c=window.innerWidth/2,f=window.innerHeight/2,d()},d=()=>{s(0,o=[]),s(1,r=[]);let h=[5,6,7,6,5,4,3],a=-((h.length-1)/2)*y*Math.sqrt(3);for(let _=0;_<h.length;_++){let g=-((h[_]-1)/2)*y*2;for(let p=0;p<h[_];p++){let w=c+g+p*y*2,x=f+a,P=[];for(let k=0;k<6;k++){let R=(k*60-30)*(Math.PI/180);P.push({x:w+y/(Math.sqrt(3)/2)*Math.cos(R),y:x+y/(Math.sqrt(3)/2)*Math.sin(R),direction:k+1})}o.push({x:w,y:x,number:null,blueDots:P})}a+=y*Math.sqrt(3)}},S=(h,a)=>{let _=1/0,g=-1;return o.forEach((p,w)=>{let x=Math.hypot(p.x-h,p.y-a);x<_&&(_=x,g=w)}),_<y?g:null},K=(h,a,_)=>{let g=1/0,p=null;return _.blueDots.forEach(w=>{let x=Math.hypot(w.x-h,w.y-a);x<g&&(g=x,p=w)}),g<y/2?p:null},T=()=>{s(1,r=o.filter(h=>h.number!==null).map(h=>{const a=h.blueDots.find(_=>_.direction===h.number);return a?{x1:h.x,y1:h.y,x2:a.x,y2:a.y}:null}).filter(h=>h!==null))},z=h=>{let a=h.touches[0],_=S(a.clientX,a.clientY);_!==null&&(l.current=_,t=a.clientX,u=a.clientY)},A=h=>{h.preventDefault();let a=h.touches[0],_=S(a.clientX,a.clientY);if(_!==null&&_!==l.current&&(l.current=_),l.current!==null){let g=o[l.current],p=K(a.clientX,a.clientY,g);p&&(s(0,o[l.current]={...o[l.current],number:p.direction},o),s(0,o=[...o]),T())}},B=h=>{let a=h.changedTouches[0];l.current!==null&&Math.hypot(a.clientX-t,a.clientY-u)<5&&(s(0,o[l.current].number=null,o),s(0,o=[...o]),T()),l.current=null};return U(()=>(e(),window.addEventListener("resize",e),window.addEventListener("touchstart",z,{passive:!1}),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",B),()=>{window.removeEventListener("resize",e),window.removeEventListener("touchstart",z),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",B)})),[o,r]}class ce extends Z{constructor(n){super(),$(this,n,se,ne,Q,{})}}export{ce as component};
